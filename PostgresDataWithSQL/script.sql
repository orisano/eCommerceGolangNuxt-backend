create table attributes
(
    id         bigint generated by default as identity
        constraint attributes_pkey
            primary key,
    name       varchar                  not null,
    created_at timestamp with time zone not null,
    updated_at timestamp with time zone not null,
    deleted_at timestamp with time zone
);

alter table attributes
    owner to postgres;

create table brands
(
    id         bigint generated by default as identity
        constraint brands_pkey
            primary key,
    name       varchar                  not null,
    created_at timestamp with time zone not null,
    updated_at timestamp with time zone not null,
    deleted_at timestamp with time zone
);

alter table brands
    owner to postgres;

create table shop_categories
(
    id         bigint generated by default as identity
        constraint shop_categories_pkey
            primary key,
    name       varchar                  not null,
    slug       varchar                  not null,
    image      varchar                  not null,
    created_at timestamp with time zone not null,
    updated_at timestamp with time zone not null,
    deleted_at timestamp with time zone
);

alter table shop_categories
    owner to postgres;

create table categories
(
    id                       bigint generated by default as identity
        constraint categories_pkey
            primary key,
    name                     varchar                  not null,
    slug                     varchar                  not null,
    created_at               timestamp with time zone not null,
    updated_at               timestamp with time zone not null,
    deleted_at               timestamp with time zone,
    category_children        bigint
        constraint categories_categories_children
            references categories
            on delete set null,
    shop_category_categories bigint
        constraint categories_shop_categories_categories
            references shop_categories
            on delete set null
);

alter table categories
    owner to postgres;

create table seller_product_categories
(
    id                          bigint generated by default as identity
        constraint seller_product_categories_pkey
            primary key,
    created_at                  timestamp with time zone not null,
    updated_at                  timestamp with time zone not null,
    deleted_at                  timestamp with time zone,
    category_product_categories bigint
        constraint seller_product_categories_categories_product_categories
            references categories
            on delete set null
);

alter table seller_product_categories
    owner to postgres;

create table users
(
    id               bigint generated by default as identity
        constraint users_pkey
            primary key,
    name             varchar                  not null,
    phone_number     varchar                  not null
        constraint users_phone_number_key
            unique,
    password         varchar                  not null,
    admin            boolean default false    not null,
    staff            boolean default false    not null,
    seller           boolean default false    not null,
    active           boolean default false    not null,
    admin_user_name  varchar,
    admin_user_token varchar,
    created_at       timestamp with time zone not null,
    updated_at       timestamp with time zone not null,
    deleted_at       timestamp with time zone
);

alter table users
    owner to postgres;

create table carts
(
    id         bigint generated by default as identity
        constraint carts_pkey
            primary key,
    slug       varchar                  not null,
    created_at timestamp with time zone not null,
    updated_at timestamp with time zone not null,
    deleted_at timestamp with time zone,
    user_carts bigint
        constraint carts_users_carts
            references users
            on delete set null
);

alter table carts
    owner to postgres;

create table seller_requests
(
    id                            bigint generated by default as identity
        constraint seller_requests_pkey
            primary key,
    seller_name                   varchar                  not null,
    shop_name                     varchar                  not null,
    contact_number                varchar                  not null
        constraint seller_requests_contact_number_key
            unique,
    shop_location                 varchar                  not null,
    tax_id                        varchar                  not null,
    accepted                      boolean default false    not null,
    created_at                    timestamp with time zone not null,
    updated_at                    timestamp with time zone not null,
    deleted_at                    timestamp with time zone,
    shop_category_seller_requests bigint
        constraint seller_requests_shop_categories_seller_requests
            references shop_categories
            on delete set null,
    user_seller_requests          bigint
        constraint seller_requests_users_seller_requests
            references users
            on delete set null
);

alter table seller_requests
    owner to postgres;

create table seller_shops
(
    id                         bigint generated by default as identity
        constraint seller_shops_pkey
            primary key,
    name                       varchar                  not null,
    slug                       varchar                  not null,
    contact_number             varchar                  not null,
    banner                     varchar                  not null,
    business_location          varchar                  not null,
    tax_id                     varchar                  not null,
    active                     boolean default false    not null,
    created_at                 timestamp with time zone not null,
    updated_at                 timestamp with time zone not null,
    deleted_at                 timestamp with time zone,
    shop_category_seller_shops bigint
        constraint seller_shops_shop_categories_seller_shops
            references shop_categories
            on delete set null,
    user_seller_shops          bigint
        constraint seller_shops_users_seller_shops
            references users
            on delete set null,
    user_approved_shops        bigint
        constraint seller_shops_users_approved_shops
            references users
            on delete set null
);

alter table seller_shops
    owner to postgres;

create table seller_products
(
    id                          bigint generated by default as identity
        constraint seller_products_pkey
            primary key,
    name                        varchar                  not null,
    slug                        varchar                  not null
        constraint seller_products_slug_key
            unique,
    selling_price               numeric                  not null,
    product_price               numeric                  not null,
    quantity                    bigint                   not null,
    active                      boolean default true     not null,
    description                 varchar,
    offer_price                 bigint  default 0        not null,
    offer_price_start           timestamp with time zone,
    offer_price_end             timestamp with time zone,
    next_stock                  timestamp with time zone,
    created_at                  timestamp with time zone not null,
    updated_at                  timestamp with time zone not null,
    deleted_at                  timestamp with time zone,
    brand_brand                 bigint
        constraint seller_products_brands_brand
            references brands
            on delete set null,
    seller_shop_seller_products bigint
        constraint seller_products_seller_shops_seller_products
            references seller_shops
            on delete set null,
    user_seller_products        bigint
        constraint seller_products_users_seller_products
            references users
            on delete set null
);

alter table seller_products
    owner to postgres;

create table seller_product_images
(
    id                                   bigint generated by default as identity
        constraint seller_product_images_pkey
            primary key,
    display                              boolean default false    not null,
    image                                varchar                  not null,
    created_at                           timestamp with time zone not null,
    updated_at                           timestamp with time zone not null,
    deleted_at                           timestamp with time zone,
    seller_product_seller_product_images bigint
        constraint seller_product_images_seller_products_seller_product_images
            references seller_products
            on delete set null
);

alter table seller_product_images
    owner to postgres;

create table seller_product_variations
(
    id                                       bigint generated by default as identity
        constraint seller_product_variations_pkey
            primary key,
    product_price                            numeric                  not null,
    selling_price                            numeric                  not null,
    quantity                                 bigint                   not null,
    image                                    varchar                  not null,
    created_at                               timestamp with time zone not null,
    updated_at                               timestamp with time zone not null,
    deleted_at                               timestamp with time zone,
    seller_product_seller_product_variations bigint
        constraint seller_product_variations_sell_03d77f36742a8e48a612f02595d08da6
            references seller_products
            on delete set null
);

alter table seller_product_variations
    owner to postgres;

create table cart_products
(
    id                                     bigint generated by default as identity
        constraint cart_products_pkey
            primary key,
    quantity                               bigint                   not null,
    created_at                             timestamp with time zone not null,
    updated_at                             timestamp with time zone not null,
    deleted_at                             timestamp with time zone,
    cart_cart_products                     bigint
        constraint cart_products_carts_cart_products
            references carts
            on delete set null,
    seller_product_cart_products           bigint
        constraint cart_products_seller_products_cart_products
            references seller_products
            on delete set null,
    seller_product_variation_cart_products bigint
        constraint cart_products_seller_product_variations_cart_products
            references seller_product_variations
            on delete set null
);

alter table cart_products
    owner to postgres;

create table seller_product_variation_values
(
    id                                                       bigint generated by default as identity
        constraint seller_product_variation_values_pkey
            primary key,
    name                                                     varchar                  not null,
    description                                              varchar                  not null,
    created_at                                               timestamp with time zone not null,
    updated_at                                               timestamp with time zone not null,
    deleted_at                                               timestamp with time zone,
    attribute_attribute                                      bigint
        constraint seller_product_variation_values_attributes_attribute
            references attributes
            on delete set null,
    seller_product_variation_seller_product_variation_values bigint
        constraint seller_product_variation_value_74ff151fde8b019b2747d2d2d21ccbd8
            references seller_product_variations
            on delete set null
);

alter table seller_product_variation_values
    owner to postgres;

create table user_locations
(
    id                  bigint generated by default as identity
        constraint user_locations_pkey
            primary key,
    area                varchar                  not null,
    street              varchar                  not null,
    house               varchar                  not null,
    post_office         varchar                  not null,
    post_code           bigint                   not null,
    police_station      varchar                  not null,
    city                varchar                  not null,
    created_at          timestamp with time zone not null,
    updated_at          timestamp with time zone not null,
    deleted_at          timestamp with time zone,
    user_user_locations bigint
        constraint user_locations_users_user_locations
            references users
            on delete set null
);

alter table user_locations
    owner to postgres;

create table checkouts
(
    id                           bigint generated by default as identity
        constraint checkouts_pkey
            primary key,
    total_price                  numeric                  not null,
    completed                    boolean default false    not null,
    created_at                   timestamp with time zone not null,
    updated_at                   timestamp with time zone not null,
    deleted_at                   timestamp with time zone,
    cart_checkout                bigint
        constraint checkouts_cart_checkout_key
            unique
        constraint checkouts_carts_checkout
            references carts
            on delete set null,
    user_checkouts               bigint
        constraint checkouts_users_checkouts
            references users
            on delete set null,
    user_location_user_locations bigint
        constraint checkouts_user_locations_user_locations
            references user_locations
            on delete set null
);

alter table checkouts
    owner to postgres;

create table checkout_products
(
    id                                         bigint generated by default as identity
        constraint checkout_products_pkey
            primary key,
    quantity                                   bigint                   not null,
    selling_price                              numeric                  not null,
    offer_price                                bigint  default 0        not null,
    received                                   boolean default false    not null,
    status                                     bigint  default 0        not null,
    created_at                                 timestamp with time zone not null,
    updated_at                                 timestamp with time zone not null,
    deleted_at                                 timestamp with time zone,
    checkout_checkout_products                 bigint
        constraint checkout_products_checkouts_checkout_products
            references checkouts
            on delete set null,
    seller_product_checkout_products           bigint
        constraint checkout_products_seller_products_checkout_products
            references seller_products
            on delete set null,
    seller_product_variation_checkout_products bigint
        constraint checkout_products_seller_product_variations_checkout_products
            references seller_product_variations
            on delete set null,
    user_checkout_products                     bigint
        constraint checkout_products_users_checkout_products
            references users
            on delete set null,
    user_seller_checkout_products              bigint
        constraint checkout_products_users_seller_checkout_products
            references users
            on delete set null
);

alter table checkout_products
    owner to postgres;

create table category_seller_products
(
    category_id       bigint not null
        constraint category_seller_products_category_id
            references categories
            on delete cascade,
    seller_product_id bigint not null
        constraint category_seller_products_seller_product_id
            references seller_products
            on delete cascade,
    constraint category_seller_products_pkey
        primary key (category_id, seller_product_id)
);

alter table category_seller_products
    owner to postgres;


